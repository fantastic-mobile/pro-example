
/**
 * 由 Fantastic-mobile 提供技术支持
 * Powered by Fantastic-mobile
 * https://fantastic-mobile.hurui.me/
 */
    
import{_ as H}from"./index-TGLGxjLi.js";import{_ as T}from"./index.vue_vue_type_script_setup_true_lang-CuFXODrP.js";import{d as D,aj as Z,W as G,j as J,o as _,k as y,a7 as K,a8 as Q,u as i,a1 as U,t as tt,p as et,r as A,s as ot,b as f,F as lt,c as at,w as W}from"./index-DSCegQmK.js";import"./index.vue_vue_type_script_setup_true_lang-Sn60HHzg.js";function P(t,e,o,l){return Number.parseFloat((e-l*e/t+o).toFixed(2))}function nt(t){[...t.querySelectorAll("*")].forEach(e=>t.removeChild(e))}function st(t){return t.value}function k(t,e){const o=document.createElementNS("http://www.w3.org/2000/svg",t);for(const l in e)o.setAttribute(l,e[l]);return o}function rt(t,e,o){if(nt(t),e.length<=1)return;o=o||{},typeof e[0]=="number"&&(e=e.map(n=>({value:n})));const l=o.onmousemove,a=o.onmouseout,s="interactive"in o?o.interactive:!!l,b=o.spotRadius||2,d=b*2,B=o.cursorWidth||2,F=Number.parseFloat(t.attributes["stroke-width"].value),V=o.fetch||st,x=e.map(n=>V(n)),j=Number.parseFloat(t.attributes.width.value)-d*2,w=Number.parseFloat(t.attributes.height.value),E=w-F*2-d,N=Math.max(...x),u=-1e3,R=x.length-1,I=j/R,m=[],M=P(N,E,F+b,x[0]);let S="M".concat(d," ").concat(M);x.forEach((n,p)=>{const r=p*I+d,c=P(N,E,F+b,n);m.push(Object.assign({},e[p],{index:p,x:r,y:c})),S+=" L ".concat(r," ").concat(c)});const X=k("path",{class:"sparkline--line",d:S,fill:"none"}),Y="".concat(S," V ").concat(w," L ").concat(d," ").concat(w," Z"),O=k("path",{class:"sparkline--fill",d:Y,stroke:"none"});if(t.appendChild(O),t.appendChild(X),!s)return;const h=k("line",{class:"sparkline--cursor",x1:u,x2:u,y1:0,y2:w,"stroke-width":B}),C=k("circle",{class:"sparkline--spot",cx:u,cy:u,r:b});t.appendChild(h),t.appendChild(C);const g=k("rect",{width:t.attributes.width.value,height:t.attributes.height.value,style:"fill: transparent; stroke: transparent",class:"sparkline--interaction-layer"});t.appendChild(g),g.addEventListener("mouseout",n=>{h.setAttribute("x1",u.toString()),h.setAttribute("x2",u.toString()),C.setAttribute("cx",u.toString()),a&&a(n)}),g.addEventListener("mousemove",n=>{const p=n.offsetX;let r=m.find(z=>z.x>=p);r||(r=m[R]);const c=m[m.indexOf(r)-1];let v,L;c?(L=c.x+(r.x-c.x)/2,v=p>=L?r:c):v=r;const $=v.x,q=v.y;C.setAttribute("cx",$),C.setAttribute("cy",q),h.setAttribute("x1",$),h.setAttribute("x2",$),l&&l(n,v)})}const it={class:"sparkline"},ut=["width","height","stroke-width","stroke","fill"],ct=D({name:"FmSparkline",__name:"index",props:{value:{},width:{default:100},height:{default:30},strokeWidth:{default:3},strokeColor:{default:"#dc2b33"},fillColor:{default:"transparent"},cursorColor:{default:"#dc2b33"},spotColor:{default:"#dc2b33"},tooltip:{type:Boolean,default:!1}},setup(t){Z(a=>({v6ce87f52:a.cursorColor,v2117aeaa:a.spotColor}));const e=t,o=G("sparklineRef"),l=A({show:!1,content:"",top:0,left:0});return J(()=>{rt(o.value,e.value,e.tooltip&&{onmousemove:(a,s)=>{l.value.show=!0,l.value.content=s.tooltip,l.value.top=a.offsetY,l.value.left=a.offsetX+20},onmouseout:()=>{l.value.show=!1}})}),(a,s)=>(_(),y("div",it,[(_(),y("svg",{ref_key:"sparklineRef",ref:o,width:t.width,height:t.height,"stroke-width":t.strokeWidth,stroke:t.strokeColor,fill:t.fillColor},null,8,ut)),t.tooltip?K((_(),y("span",{key:0,class:"tooltip",style:U(["left: ".concat(i(l).left,"px"),"top: ".concat(i(l).top,"px")])},tt(i(l).content),5)),[[Q,i(l).show]]):et("",!0)]))}}),pt=ot(ct,[["__scopeId","data-v-b6480129"]]),ft=D({__name:"_demo1",setup(t){const e=A([1,5,2,4,8,3,7]),o=A([{tooltip:"值：1",value:1},{tooltip:"值：3",value:3},{tooltip:"值：5",value:5},{tooltip:"值：8",value:8},{tooltip:"值：4",value:4},{tooltip:"值：6",value:6},{tooltip:"值：9",value:9}]);return(l,a)=>{const s=pt;return _(),y(lt,null,[f(s,{value:i(e)},null,8,["value"]),f(s,{value:i(e),"stroke-color":"#409eff","fill-color":"#b3d8ff"},null,8,["value"]),f(s,{value:i(o),tooltip:""},null,8,["value"]),f(s,{value:i(o),tooltip:"","stroke-color":"#409eff","fill-color":"#b3d8ff","cursor-color":"#e6a23c","spot-color":"#909399"},null,8,["value"])],64)}}}),dt='<script setup lang="ts">\nconst value1 = ref([1, 5, 2, 4, 8, 3, 7])\nconst value2 = ref([\n  { tooltip: \'值：1\', value: 1 },\n  { tooltip: \'值：3\', value: 3 },\n  { tooltip: \'值：5\', value: 5 },\n  { tooltip: \'值：8\', value: 8 },\n  { tooltip: \'值：4\', value: 4 },\n  { tooltip: \'值：6\', value: 6 },\n  { tooltip: \'值：9\', value: 9 },\n])\n<\/script>\n\n<template>\n  <FmSparkline :value="value1" />\n  <FmSparkline :value="value1" stroke-color="#409eff" fill-color="#b3d8ff" />\n  <FmSparkline :value="value2" tooltip />\n  <FmSparkline :value="value2" tooltip stroke-color="#409eff" fill-color="#b3d8ff" cursor-color="#e6a23c" spot-color="#909399" />\n</template>\n',_t=D({__name:"index",setup(t){return(e,o)=>{const l=T,a=H;return _(),at(a,{navbar:"","navbar-start-side":"back"},{default:W(()=>[f(l,{code:i(dt)},{default:W(()=>[f(ft)]),_:1},8,["code"])]),_:1})}}});export{_t as default};
