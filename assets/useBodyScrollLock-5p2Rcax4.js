
/**
 * 由 Fantastic-mobile 提供技术支持
 * Powered by Fantastic-mobile
 * https://fantastic-mobile.hurui.me/
 */
    
import{b1 as p,z as f,b2 as b,r as a,b3 as h,Q as w,a4 as B,b4 as E,b5 as i,b6 as S,S as k}from"./index-CC4bdbYS.js";const x=p(()=>{const t=a(new Map),e=a(),o=f(()=>{for(const l of t.value.values())if(l)return!0;return!1}),r=h({scrollBody:a(!0)});let n=null;const y=()=>{var l;document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=(l=e.value)!=null?l:"",i&&(n==null||n()),e.value=void 0};return w(o,(l,g)=>{var u;if(!B)return;if(!l){g&&y();return}e.value===void 0&&(e.value=document.body.style.overflow);const s=window.innerWidth-document.documentElement.clientWidth,c={padding:s,margin:0},d=(u=r.scrollBody)!=null&&u.value?typeof r.scrollBody.value=="object"?E({padding:r.scrollBody.value.padding===!0?s:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?s:r.scrollBody.value.margin},c):c:{padding:0,margin:0};s>0&&(document.body.style.paddingRight=typeof d.padding=="number"?"".concat(d.padding,"px"):String(d.padding),document.body.style.marginRight=typeof d.margin=="number"?"".concat(d.margin,"px"):String(d.margin),document.documentElement.style.setProperty("--scrollbar-width","".concat(s,"px")),document.body.style.overflow="hidden"),i&&(n=S(document,"touchmove",v=>C(v),{passive:!1})),k(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function W(t){const e=Math.random().toString(36).substring(2,7),o=x();o.value.set(e,t!=null?t:!1);const r=f({get:()=>{var n;return(n=o.value.get(e))!=null?n:!1},set:n=>o.value.set(e,n)});return b(()=>{o.value.delete(e)}),r}function m(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const o=t.parentNode;return!(o instanceof Element)||o.tagName==="BODY"?!1:m(o)}}function C(t){const e=t||window.event,o=e.target;return o instanceof Element&&m(o)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}export{W as u};
